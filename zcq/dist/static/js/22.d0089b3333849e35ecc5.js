webpackJsonp([22],{"49dB":function(e,t){},"o+nq":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("woOf"),r=a.n(o),l=a("mvHQ"),s=a.n(l),n=a("gFd4"),i=(a("NYxO"),{data:function(){return{form:{ctime:"",username:"",phone:"",house_name:"",dep:"",group:"",user_id:"",has_kp:"",has_dz:""},dateFilter:["本月","上月","本周","上周","全部"],dateFilterCur:4,dataObj:{},page:1,pageSize:20}},computed:{userInfo:function(){return this.$store.state.user.userInfo},infoPos:function(){var e=this,t=this.$store.state.user.infoPos;return t&&t.dep&&t.dep_arr&&t.dep_arr.map(function(a,o){a.k==t.dep&&(e.form.department=a.k)}),t&&t.group&&t.group_arr[t.dep].groups&&t.group_arr[t.dep].groups.map(function(a,o){a.value==t.group&&(e.form.group=a.value)}),t&&t.fxs&&t.fxs_arr[t.dep][t.group]&&t.fxs_arr[t.dep][t.group].map(function(a,o){console.log(o,a),a.k==t.fxs&&(e.form.fxs=a.k)}),t},token:function(){return localStorage.getItem("token")}},watch:{"form.ctime":function(){this.getData()},"form.dep":function(){this.getData()},"form.group":function(){this.getData()},"form.user_id":function(){this.getData()},"form.house_name":function(){this.getData()},"form.phone":function(){this.getData()},"form.username":function(){this.getData()}},mounted:function(){this.getData()},methods:{getData:function(){var e=this,t=JSON.parse(s()(this.form)),a=r()(t,{action_name:"getSaleList",type:this.$route.params.type,page:this.page,pageSize:this.pageSize,time_start:this.form.ctime&&this.form.ctime[0]?this.form.ctime[0]:"",time_end:this.form.ctime&&this.form.ctime[1]?this.form.ctime[1]:"",ctime:""});this.$http.post("/api/v1/new_admin",a,function(t){t.data.show=!0,t.data.cjInfoShow=[t.data.cjInfo],e.dataObj=t.data,e.exportData=a})},toDel:function(e){var t=this;this.$http.post("/api/v1/new_admin",{action_name:"deleteSaleRecord",id:e},function(e){t.$notify({title:"成功",message:"删除成功！",type:"success"}),t.getData()})},toEdit:function(e){this.$router.push({name:"/financial/success_detail",params:{id:e}})},departSelect:function(){this.form.group=""},groupSelect:function(){this.form.fxs=""},dateFilterHandle:function(e,t){this[t]=e;var a=void 0;a=1==e?{time_start:n.a.getCurrentYesterday().format("yyyy-MM-dd"),time_end:n.a.getCurrentYesterday().format("yyyy-MM-dd")}:2==e?{time_start:n.a.getCurrentWeek()[0].format("yyyy-MM-dd"),time_end:n.a.getCurrentWeek()[1].format("yyyy-MM-dd")}:3==e?{time_start:n.a.getPreviousWeek()[0].format("yyyy-MM-dd"),time_end:n.a.getPreviousWeek()[1].format("yyyy-MM-dd")}:{time_start:"",time_end:""},this.form.ctime=[a.time_start,a.time_end]},pageChange:function(e){this.page=e,this.getData()},clickSearch:function(){this.page=1,this.getData()},resetFrom:function(e){this.$refs[e].resetFields(),this.page=1,this.getData()}}}),u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.dataObj.show?a("div",{staticClass:"public_mt caiwu_success"},[a("div",{staticClass:"guide_filter"},[a("el-form",{ref:"form",staticClass:"filter_form",attrs:{inline:!0,model:e.form,"label-position":"left","label-width":"90px"}},[a("div",{staticClass:"search_group"},[a("el-form-item",{attrs:{label:"部门：",prop:"dep"}},[e.infoPos.dep_arr?a("el-select",{attrs:{disabled:!!e.infoPos.dep,placeholder:"请选择"},on:{change:e.departSelect},model:{value:e.form.dep,callback:function(t){e.$set(e.form,"dep",t)},expression:"form.dep"}},e._l(e.infoPos.dep_arr,function(e){return a("el-option",{key:e.k,attrs:{label:e.v,value:e.k}})}),1):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"战队：",prop:"group"}},[" "!=e.form.dep&&e.infoPos.group_arr[e.form.dep]&&e.infoPos.group_arr[e.form.dep].groups?a("el-select",{attrs:{disabled:!!e.infoPos.group,placeholder:"请选择"},on:{change:e.groupSelect},model:{value:e.form.group,callback:function(t){e.$set(e.form,"group",t)},expression:"form.group"}},e._l(e.infoPos.group_arr[e.form.dep].groups,function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}),1):a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.group,callback:function(t){e.$set(e.form,"group",t)},expression:"form.group"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"分析师：",prop:"fxs"}},[e.form.dep&&e.form.group?a("el-select",{attrs:{disabled:!!e.infoPos.fxs,placeholder:"请选择"},model:{value:e.form.usre_id,callback:function(t){e.$set(e.form,"usre_id",t)},expression:"form.usre_id"}},e._l(e.infoPos.fxs_arr[e.form.dep][e.form.group],function(t){return e.infoPos.fxs_arr[e.form.dep][e.form.group]?a("el-option",{key:t.v,attrs:{label:t.v,value:t.k}}):e._e()}),1):a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.group,callback:function(t){e.$set(e.form,"group",t)},expression:"form.group"}})],1)],1),e._v(" "),a("div",{staticClass:"search_group"},[a("el-form-item",{attrs:{label:"成交楼盘：",prop:"house_name"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.form.house_name,callback:function(t){e.$set(e.form,"house_name",t)},expression:"form.house_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"客户姓名：",prop:"username"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"客户电话：",prop:"phone"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1),e._v(" "),a("div",{staticClass:"search_group"},[a("el-form-item",{attrs:{label:"是否开票:",prop:"has_kp"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.has_kp,callback:function(t){e.$set(e.form,"has_kp",t)},expression:"form.has_kp"}},e._l(["请选择","否","是"],function(e,t){return a("el-option",{key:t,attrs:{label:e,value:0==t?"":t}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"是否到账:",prop:"has_dz"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.has_dz,callback:function(t){e.$set(e.form,"has_dz",t)},expression:"form.has_dz"}},e._l(["请选择","否","是"],function(e,t){return a("el-option",{key:t,attrs:{label:e,value:0==t?"":t}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"search_group time_group"},[a("el-form-item",{attrs:{label:"时间：",prop:"ctime"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.form.ctime,callback:function(t){e.$set(e.form,"ctime",t)},expression:"form.ctime"}})],1)],1),e._v(" "),a("div",{staticClass:"filter_buttons"},[a("el-button",{staticClass:"btn_submit",on:{click:function(t){return e.clickSearch("form")}}},[e._v("搜索")]),e._v(" "),a("el-button",{staticClass:"btn_clear",on:{click:function(t){return e.resetFrom("form")}}},[e._v("清空条件")])],1)])],1),e._v(" "),a("div",{staticClass:"success_info"},[a("div",{staticClass:"total"},[a("div",{staticClass:"title"},[e._v("总计")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dataObj.cjInfoShow,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"sale_money_total",label:"成交佣金(元)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sale_total_2",label:"总成交数(套)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"daozhang_money_total",label:"总到账佣金(元)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"fanyong_money_total",label:"总返佣金额(元)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"kaipiao_money_total",label:"总开票金额(元)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sale_money_tuifan_total",label:"总退房金额(元)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tuifan_total",label:"总退房(套)"}})],1)],1),e._v(" "),a("div",{staticClass:"total"},[a("div",{staticClass:"title"},[e._v("明细")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dataObj.list,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"SaleTime",label:"成交时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user_name",label:"成交人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"CustomerName",label:"客户姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"CustomerTel",label:"客户电话"}}),e._v(" "),a("el-table-column",{attrs:{prop:"SumMoney",label:"成交总佣金"}}),e._v(" "),a("el-table-column",{attrs:{prop:"HouseName",label:"成交楼盘"}}),e._v(" "),a("el-table-column",{attrs:{prop:"DaoZhangMoney",label:"到账金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"FanYongMoney",label:"返佣金额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"KaiPiaoMoney",label:"开票金额"}}),e._v(" "),a("el-table-column",{attrs:{label:"是否退房"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.HasTuifan,callback:function(a){e.$set(t.row,"HasTuifan",a)},expression:"scope.row.HasTuifan"}},e._l(["否","是"],function(e,t){return a("el-option",{key:t,attrs:{label:e,value:""+t}})}),1)]}}],null,!1,778907922)}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"134"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"caozuo_btn"},[a("el-button",{on:{click:function(a){return e.toEdit(t.row.Sid)}}},[e._v("编辑")])],1)]}}],null,!1,3277811251)})],1),e._v(" "),0!=e.dataObj.total?a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:1*e.dataObj.total,"page-size":e.pageSize},on:{"current-change":e.pageChange}}):e._e()],1)])]):e._e()},staticRenderFns:[]};var p=a("VU/8")(i,u,!1,function(e){a("49dB")},"data-v-3093bea6",null);t.default=p.exports}});