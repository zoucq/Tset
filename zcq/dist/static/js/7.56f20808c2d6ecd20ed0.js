webpackJsonp([7],{"5hxe":function(e,t){},N5Du:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={components:{noData:a("sqAx").a},data:function(){return{dialogCommetVisible:!1,commet:"",commetId:"",dataObj:{},guideStatus:[{value:1,label:"未带看"},{value:2,label:"已带看"}],dialogFormGuideVisible:!1,guideForm:{action_name:"saveDkPre",house_name:"",house_id:"",action_time:"",pre_work:"",customer_info:""},editCurrent:{},formLabelWidth:"120px",page:1,pageSize:20}},computed:{userInfo:function(){return this.$store.state.user.userInfo}},mounted:function(){this.getData()},methods:{pageChange:function(e){this.page=e,this.getData()},guideStatusChange:function(e){var t=this;console.log(e),this.$http.post("/api/v1/new_admin",{action_name:"saveDkPre",id:e.Id,house_name:e.HouseName,action_time:e.ActionTime,pre_work:e.PreWork,customer_info:e.CustomerInfo,status:e.Status},function(e){t.$notify({title:"成功",message:"修改成功！",type:"success"}),t.getData()})},commetDialog:function(e){console.log(e),this.commetId=e.Id,this.dialogCommetVisible=!0},addCommet:function(){var e=this;this.$http.post("/api/v1/new_admin",{action_name:"saveDkCjComment",record_id:this.commetId,content:this.commet,type:1},function(t){e.dialogCommetVisible=!1,e.$notify({title:"成功",message:"评论成功！",type:"success"}),e.commet="",e.getData()})},editDialog:function(e){this.editCurrent=e,this.guideForm={action_name:"saveDkPre",customer_id:e.CustomerId,customer_name:e.CustomerName,house_name:e.HouseName,action_time:e.ActionTime,pre_work:e.PreWork,customer_info:e.CustomerInfo,id:e.Id,user_name:e.UserName},this.dialogFormGuideVisible=!0},saveForm:function(){var e=this,t=this.guideForm;this.$http.post("/api/v1/new_admin",t,function(t){e.$notify({title:"成功",message:"保存成功！",type:"success"}),e.$refs.guideForm.resetFields(),e.dialogFormGuideVisible=!1,e.getData()})},querySearchAsync:function(e,t){e&&0!=e.length&&this.$http.post("/api/v1/new_admin",{action_name:"houseTip",term:e},function(e){t(e.data)})},handleHouseSelect:function(e){this.guideForm.house_name=e.label,this.guideForm.house_id=e.id},getData:function(){var e=this;this.$http.post("/api/v1/new_admin",{action_name:"getDkPreList",customer_id:this.$route.params.id,page:this.page,pageSize:this.pageSize},function(t){e.dataObj=t.data})},delItem:function(e){var t=this;this.$confirm("确认删除？").then(function(a){t.$http.post("/api/v1/new_admin",{action_name:"deleteDkCj",type:"dk_pre",id:e.Id},function(e){t.$notify({title:"成功",message:"删除成功！",type:"success"}),t.getData()})}).catch(function(e){})}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container comeguide"},[e.dataObj.list&&0==e.dataObj.list.length?a("noData"):e._e(),e._v(" "),e._l(e.dataObj.list,function(t,i){return a("div",{key:i,staticClass:"comeguide_item"},[a("div",{staticClass:"comeguide_item_l"},[a("div",{staticClass:"date"},[a("span",{directives:[{name:"format",rawName:"v-format",value:{value:t.Ctime},expression:"{value:item.Ctime}"}]}),e._v("分发布")]),e._v(" "),a("div",{staticClass:"label_item"},[a("label",{attrs:{for:""}},[e._v("分析师：")]),e._v(" "),a("div",[e._v(e._s(t.UserName))])]),e._v(" "),a("div",{staticClass:"label_item"},[a("label",{attrs:{for:""}},[e._v("客户姓名：")]),e._v(" "),a("div",[e._v(e._s(t.CustomerName))])]),e._v(" "),a("div",{staticClass:"label_item"},[a("label",{attrs:{for:""}},[e._v("带看时间：")]),e._v(" "),a("div",[e._v(e._s(t.ActionTime))])]),e._v(" "),a("div",{staticClass:"label_item"},[a("label",{attrs:{for:""}},[e._v("带看项目：")]),e._v(" "),a("div",[e._v(e._s(t.HouseName))])]),e._v(" "),a("div",{staticClass:"label_item"},[a("label",{attrs:{for:""}},[e._v("客户情况：")]),e._v(" "),a("div",{staticClass:"preLine"},[e._v(e._s(t.CustomerInfo))])]),e._v(" "),a("div",{staticClass:"label_item"},[a("label",{attrs:{for:""}},[e._v("前置工作说明：")]),e._v(" "),a("div",{staticClass:"preLine"},[e._v(e._s(t.PreWork))])]),e._v(" "),a("div",{staticClass:"label_item"},[a("label",{attrs:{for:""}},[e._v("带看状态：")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(a){return e.guideStatusChange(t)}},model:{value:t.Status,callback:function(a){e.$set(t,"Status",a)},expression:"item.Status"}},e._l(e.guideStatus,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)]),e._v(" "),a("div",{staticClass:"comeguide_item_r"},[a("div",{staticClass:"title"},[e._v("点评：")]),e._v(" "),a("div",{staticClass:"dp_item_box"},e._l(t.Comments,function(t,i){return a("div",{key:i,staticClass:"dp_item"},[a("div",{staticClass:"preLine dp_item_body"},[e._v(e._s(t.Content))]),e._v(" "),a("div",{staticClass:"dp_item_info"},[a("span",{directives:[{name:"format",rawName:"v-format",value:{value:t.Ctime},expression:"{value:v.Ctime}"}]},[e._v(e._s(t.Ctime))]),e._v(" "),a("span",{staticClass:"m_l"},[e._v(e._s(t.UserName)+"（"+e._s(t.RoleName)+"）")])])])}),0),e._v(" "),a("div",{staticClass:"buttons"},[a("button",{staticClass:"my_btn",on:{click:function(a){return e.delItem(t)}}},[e._v("删除")]),e._v(" "),a("button",{staticClass:"my_btn",on:{click:function(a){return e.editDialog(t)}}},[e._v("修改")]),e._v(" "),a("button",{staticClass:"my_btn my_btn_main",on:{click:function(a){return e.commetDialog(t)}}},[e._v("点评")])])])])}),e._v(" "),e.dataObj.total&&0!=e.dataObj.total?a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.dataObj.total,"page-size":e.pageSize},on:{"current-change":e.pageChange}}):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"发表你的评论",visible:e.dialogCommetVisible,center:!0,width:"564px"},on:{"update:visible":function(t){e.dialogCommetVisible=t}}},[a("div",{staticClass:"commet_box"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.commet,expression:"commet"}],attrs:{cols:"30",rows:"10",placeholder:"输入内容"},domProps:{value:e.commet},on:{input:function(t){t.target.composing||(e.commet=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addCommet}},[e._v("发布")])],1)]),e._v(" "),a("el-dialog",{attrs:{"custom-class":"guide_dialog",title:"即将带看信息",visible:e.dialogFormGuideVisible,center:!0,top:"8vh",width:"562px"},on:{"update:visible":function(t){e.dialogFormGuideVisible=t}}},[a("el-form",{ref:"guideForm",attrs:{model:e.guideForm}},[a("el-form-item",{attrs:{label:"客户姓名：","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入客户姓名"},model:{value:e.guideForm.customer_name,callback:function(t){e.$set(e.guideForm,"customer_name",t)},expression:"guideForm.customer_name"}})],1),e._v(" "),a("el-form-item",{staticClass:"item_text",attrs:{label:"分析师：","label-width":e.formLabelWidth}},[a("div",[e._v(e._s(e.guideForm.user_name))])]),e._v(" "),a("el-form-item",{attrs:{label:"带看时间：","label-width":e.formLabelWidth,prop:"action_time"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.guideForm.action_time,callback:function(t){e.$set(e.guideForm,"action_time",t)},expression:"guideForm.action_time"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"带看项目：","label-width":e.formLabelWidth,prop:"house_name"}},[a("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearchAsync,placeholder:"请输入内容"},on:{select:e.handleHouseSelect},model:{value:e.guideForm.house_name,callback:function(t){e.$set(e.guideForm,"house_name",t)},expression:"guideForm.house_name"}})],1),e._v(" "),a("el-form-item",{staticClass:"box_area",attrs:{label:"客户情况：","label-width":e.formLabelWidth,prop:"customer_info"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.guideForm.customer_info,expression:"guideForm.customer_info"}],attrs:{name:"",cols:"30",rows:"10"},domProps:{value:e.guideForm.customer_info},on:{input:function(t){t.target.composing||e.$set(e.guideForm,"customer_info",t.target.value)}}})]),e._v(" "),a("el-form-item",{staticClass:"box_area",attrs:{label:"前置工作说明：","label-width":e.formLabelWidth,prop:"pre_work"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.guideForm.pre_work,expression:"guideForm.pre_work"}],attrs:{name:"",cols:"30",rows:"10"},domProps:{value:e.guideForm.pre_work},on:{input:function(t){t.target.composing||e.$set(e.guideForm,"pre_work",t.target.value)}}})])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveForm("dialogFormGuideVisible")}}},[e._v("保存")])],1)],1)],2)},staticRenderFns:[]};var s=a("VU/8")(i,o,!1,function(e){a("5hxe")},"data-v-e0ccdffe",null);t.default=s.exports}});